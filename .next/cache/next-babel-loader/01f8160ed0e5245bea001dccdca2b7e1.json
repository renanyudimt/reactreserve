{"ast":null,"code":"import User from \"../../models/User\";\nimport jwt from \"jsonwebtoken\";\nimport connectDb from \"../../utils/connectDb\";\nimport { destroyCookie } from \"nookies\";\nconnectDb();\nexport default (async (req, res) => {\n  if (!(\"authorization\" in req.headers)) {\n    return res.status(401).send(\"No authorization token\");\n  }\n\n  try {\n    const {\n      userId\n    } = jwt.verify(req.headers.authorization, process.env.JWT_SECRET);\n    const user = await User.findOne({\n      _id: userId\n    });\n\n    if (user) {\n      res.status(200).json({\n        success: true,\n        user: user\n      });\n    } else {\n      res.status(404).json({\n        success: false,\n        msg: \"User not found\"\n      });\n    }\n  } catch (error) {\n    res.status(403).json({\n      success: false,\n      msg: \"Invalid token\"\n    });\n  }\n});","map":{"version":3,"sources":["/Users/renanyudi/Sites/estudos/react-app/react-next/pages/api/account.js"],"names":["User","jwt","connectDb","destroyCookie","req","res","headers","status","send","userId","verify","authorization","process","env","JWT_SECRET","user","findOne","_id","json","success","msg","error"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,mBAAjB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,SAASC,aAAT,QAA8B,SAA9B;AAEAD,SAAS;AAET,gBAAe,OAAOE,GAAP,EAAYC,GAAZ,KAAoB;AACjC,MAAI,EAAE,mBAAmBD,GAAG,CAACE,OAAzB,CAAJ,EAAuC;AACrC,WAAOD,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,wBAArB,CAAP;AACD;;AAED,MAAI;AACF,UAAM;AAAEC,MAAAA;AAAF,QAAaR,GAAG,CAACS,MAAJ,CAAWN,GAAG,CAACE,OAAJ,CAAYK,aAAvB,EAAsCC,OAAO,CAACC,GAAR,CAAYC,UAAlD,CAAnB;AACA,UAAMC,IAAI,GAAG,MAAMf,IAAI,CAACgB,OAAL,CAAa;AAAEC,MAAAA,GAAG,EAAER;AAAP,KAAb,CAAnB;;AAEA,QAAIM,IAAJ,EAAU;AACRV,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBW,IAAhB,CAAqB;AAAEC,QAAAA,OAAO,EAAE,IAAX;AAAiBJ,QAAAA,IAAI,EAAEA;AAAvB,OAArB;AACD,KAFD,MAEO;AACLV,MAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBW,IAAhB,CAAqB;AAAEC,QAAAA,OAAO,EAAE,KAAX;AAAkBC,QAAAA,GAAG,EAAE;AAAvB,OAArB;AACD;AAED,GAVF,CAUG,OAAMC,KAAN,EAAa;AACdhB,IAAAA,GAAG,CAACE,MAAJ,CAAW,GAAX,EAAgBW,IAAhB,CAAqB;AAAEC,MAAAA,OAAO,EAAE,KAAX;AAAkBC,MAAAA,GAAG,EAAE;AAAvB,KAArB;AACD;AACF,CAlBD","sourcesContent":["import User from \"../../models/User\";\nimport jwt from \"jsonwebtoken\";\nimport connectDb from \"../../utils/connectDb\";\nimport { destroyCookie } from \"nookies\"\n\nconnectDb();\n\nexport default async (req, res) => {\n  if (!(\"authorization\" in req.headers)) {\n    return res.status(401).send(\"No authorization token\");\n  }\n\n  try {\n    const { userId } = jwt.verify(req.headers.authorization, process.env.JWT_SECRET)\n    const user = await User.findOne({ _id: userId })\n\n    if (user) {\n      res.status(200).json({ success: true, user: user })\n    } else {\n      res.status(404).json({ success: false, msg: \"User not found\" })\n    }\n\n   } catch(error) {\n    res.status(403).json({ success: false, msg: \"Invalid token\" })\n  }\n}"]},"metadata":{},"sourceType":"module"}